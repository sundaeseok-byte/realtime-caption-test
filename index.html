<!DOCTYPE html>

<html lang="ko">

<head>

<meta charset="UTF-8">

<title>실시간 한국어 자막</title>

<style>

  body { font-family: sans-serif; background:#111; color:#eee; margin:0; }

  header { padding:10px; border-bottom:1px solid #444; }

  button { padding:8px 12px; margin-right:5px; }

  #screen { padding:12px; height:80vh; overflow-y:auto; white-space:pre-wrap; }

  #interim { opacity:0.6; font-style:italic; }

</style>

</head>

<body>

  <header>

    <button id="toggle">🎙️ 시작</button>

    <button id="clear">🧹 지우기</button>

  </header>

  <div id="screen"></div>

  <div id="interim"></div>



<script>

const Rec = window.SpeechRecognition || window.webkitSpeechRecognition;

if (!Rec) {

  document.body.innerHTML = "<p>이 브라우저는 음성 인식을 지원하지 않습니다.</p>";

} else {

  const r = new Rec();

  r.lang = "ko-KR";

  r.continuous = true;

  r.interimResults = true;



  let recognizing = false;

  let screen = document.getElementById("screen");

  let interimDiv = document.getElementById("interim");



  r.onresult = (e) => {

    let interim = "";

    for (let i=e.resultIndex; i<e.results.length; i++) {

      let txt = e.results[i][0].transcript;

      if (e.results[i].isFinal) {

        screen.textContent += txt.trim() + "\n";

        interimDiv.textContent = "";

      } else {

        interim += txt;

      }

    }

    interimDiv.textContent = interim;

    screen.scrollTop = screen.scrollHeight;

  };



  document.getElementById("toggle").onclick = () => {

    if (!recognizing) {

      r.start();

      recognizing = true;

      toggle.textContent = "⏸️ 중지";

    } else {

      r.stop();

      recognizing = false;

      toggle.textContent = "🎙️ 시작";

    }

  };

  document.getElementById("clear").onclick = () => {

    screen.textContent = "";

    interimDiv.textContent = "";

  };

}

</script>

</body>

</html>