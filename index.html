<!doctype html>

<html lang="ko">

<head>

  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>실시간 한국어 자막 (누적/사라지지 않음)</title>

  <style>

    :root { --bg:#0b0f14; --fg:#e9eef5; --muted:#8aa0b4; --accent:#4da3ff; --panel:#0e141b; --border:#1f2a36;}

    * { box-sizing: border-box; }

    body { margin:0; background:var(--bg); color:var(--fg); font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Arial,sans-serif; }

    header { padding:12px; display:flex; gap:8px; align-items:center; flex-wrap:wrap; border-bottom:1px solid var(--border); }

    h1 { font-size:16px; margin:0 8px 0 0; color:var(--muted); font-weight:700; }

    button, select, label { background:#111923; color:var(--fg); border:1px solid var(--border); padding:8px 12px; border-radius:12px; cursor:pointer; font-weight:600; }

    button.primary { background:var(--accent); color:#001733; border-color:transparent; }

    button.danger { background:#ff4d6d; color:#250008; border-color:transparent; }

    main { padding:12px; }

    .box { border:1px solid var(--border); border-radius:16px; background:var(--panel); overflow:hidden; }

    .live { padding:10px 12px; border-bottom:1px dashed var(--border); opacity:.85; font-style:italic; min-height:36px; }

    .hist { padding:12px; height:64vh; overflow:auto; white-space:pre-wrap; }

    .row { margin:0 0 6px; }

    .status { margin-left:auto; display:flex; align-items:center; gap:8px; color:var(--muted); }

    #lamp { width:10px; height:10px; border-radius:50%; background:#485a6c; display:inline-block; }

    #lamp.on { background:#27d07d; box-shadow:0 0 0 3px rgba(39,208,125,0.15); }

  </style>

</head>

<body>

  <header>

    <h1>실시간 한국어 자막</h1>

    <button id="toggle" class="primary" aria-pressed="false">🎙️ 시작</button>

    <button id="clear">🧹 화면 지우기</button>

    <button id="copy">📋 복사</button>

    <button id="save">💾 저장</button>

    <select id="fontsize" title="글자 크기">

      <option value="18">글자 18</option>

      <option value="22" selected>글자 22</option>

      <option value="28">글자 28</option>

      <option value="36">글자 36</option>

      <option value="48">글자 48</option>

    </select>

    <label><input type="checkbox" id="timestamp" /> 타임스탬프</label>

    <label><input type="checkbox" id="autoscroll" checked /> 자동 스크롤</label>

    <div class="status"><span id="lamp"></span><span id="stateText">대기</span></div>

  </header>



  <main>

    <div class="box">

      <div class="live" id="live" aria-live="polite"></div>

      <div class="hist" id="hist"></div>

    </div>

  </main>



<script>

(() => {

  const SpeechRec = window.SpeechRecognition || window.webkitSpeechRecognition;

  const btn = document.getElementById('toggle');

  const clearBtn = document.getElementById('clear');

  const copyBtn = document.getElementById('copy');

  const saveBtn = document.getElementById('save');

  const fsSel = document.getElementById('fontsize');

  const tsChk = document.getElementById('timestamp');

  const autoChk = document.getElementById('autoscroll');

  const live = document.getElementById('live');

  const hist